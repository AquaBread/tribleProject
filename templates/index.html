<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traible</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.js"></script>
</head>
<body>
    <h1 id="top"><a href="/" class="traible-search-link">Traible Search</a></h1>

    <div class="search-container">
        <input type="text" id="keywords" name="keywords" placeholder="Enter Keywords (comma-separated)">
        <button onclick="searchKeywords()">Search</button>
        <button onclick="openForum()">Submit a Solution</button>
        <button id="upload-button" onclick="showUploadModal()">Upload a File</button>
    </div>

    {% if show_upload_modal %}
    <script>
        window.onload = function() {
            showUploadModal(true);
        };
    </script>
    {% endif %}

    <!-- Upload -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="hideUploadModal()">&times;</span>
            <h2>Upload a File</h2>
            <form id="upload-form" method="post" enctype="multipart/form-data" onsubmit="return checkFileUploaded()">
                <input type="file" name="file" id="file-input" required>
                <button type="submit">Upload</button>
            </form>
            <div id="loading-container" class="hidden">
                <progress id="progress-bar" value="0" max="100"></progress>
                <p id="progress-text">0%</p>
            </div>
        </div>
    </div>

    <div id="search-info"></div>

    <div class="container">
        <div class="left-column scrollable">
            <h2 id="pdf-results-heading" class="hidden"><a href="/" class="traible-search-link">PDF Results</a></h2>
            <div id="pdf-results">
                <div id="results"></div>
            </div>
        </div>

        <div class="right-column scrollable">
            <h2 id="traible-knowledge-heading" class="hidden">Traible Knowledge</h2>
            <div id="tk-results" class="results-container"></div>
        </div>
    </div>

    <script>
        var initialUploadRequired = {{ show_upload_modal | tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
